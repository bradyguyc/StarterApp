<ContentPage
    x:Class="StarterApp.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:controls="clr-namespace:StarterApp.CustomControls"
    xmlns:dx="clr-namespace:DevExpress.Maui.Core;assembly=DevExpress.Maui.Core"
    xmlns:models="clr-namespace:StarterApp.Models"
    xmlns:popup="clr-namespace:Syncfusion.Maui.Popup;assembly=Syncfusion.Maui.Popup"
    xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
    xmlns:viewmodels="clr-namespace:StarterApp.ViewModels"
    x:DataType="viewmodels:MainPageViewModel">
    <ContentPage.Resources>
        <ResourceDictionary>
            <toolkit:InvertedBoolConverter x:Key="InvertedBoolConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>
    <Grid RowDefinitions="*">

        <controls:ErrorPopupView
            Grid.Row="0"
            Grid.Column="0"
            ControlTemplate="{StaticResource ErrorPopupStandard}"
            ErrorCode="{Binding PopupDetails.ErrorCode}"
            ErrorMessage="{Binding PopupDetails.ErrorMessage}"
            ErrorReason="{Binding PopupDetails.ErrorReason}"
            HeightRequest="500"
            ShowErrorPopup="{Binding PopupDetails.IsOpen, Mode=TwoWay}"
            WidthRequest="300" />


        <ScrollView Grid.Row="0" BackgroundColor="{dx:ThemeColor SurfaceContainer}" Margin="0,0,0,20">
            <VerticalStackLayout Padding="30,0" Spacing="25">
                <Image
                    Aspect="AspectFit"
                    HeightRequest="185"
                    Source="dotnet_bot.png" />
                <Label Text="Hello, World!" />
                <Button
                    x:Name="CounterBtn"
                    Command="{Binding TestShowErrorCommand}"
                    Text="Test Error PopUp" />

                <Button
                    x:Name="SignIn"
                    Command="{Binding SignInCommand}"
                    HorizontalOptions="Fill"
                    IsEnabled="{Binding IsSignedIn, Converter={StaticResource InvertedBoolConverter}}"
                    SemanticProperties.Hint="sign in"
                    Text="Sign In" />

                <Button
                    x:Name="signOut"
                    Command="{Binding SignOutCommand}"
                    HorizontalOptions="Fill"
                    IsEnabled="{Binding IsSignedIn}"
                    SemanticProperties.Hint="Sign Out"
                    Text="Sign Out" />
                <Border>
                <ListView HorizontalScrollBarVisibility="Always" ItemsSource="{Binding IdTokenClaims}" HeightRequest="400" Margin="0,0,0,10" />
                </Border>

            </VerticalStackLayout>
        </ScrollView>

    </Grid>
</ContentPage>